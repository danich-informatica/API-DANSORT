import{Z as u}from"#entry";import{g as n,p as l,a as m,r as i}from"./BXKflvj5.js";var a=(s=>(s.SKU_REJECT="REJECT",s))(a||{}),r=(s=>(s.ENROLLMENT_HISTORY="EnrollmentHistory",s.SORTER_HISTORY="SorterHistory",s.SKU_GRAPHS="SkuGraphs",s.ASSIGNMENT_ERROR="AssignmentError",s))(r||{});const g=[{name:r.ENROLLMENT_HISTORY,show:!1},{name:r.SORTER_HISTORY,show:!1},{name:r.SKU_GRAPHS,show:!1},{name:r.ASSIGNMENT_ERROR,show:!1}],S=()=>({assignments:[],assignment_modals:g,filter_option_selected:null,filter_assignment_option_selected:null,skus:[],sorter_history:[],enrollment_history:[],is_stopped_assignment_listener:!1}),_={async getEnrollmentHistory(s){try{this.enrollment_history=await n(`/assignment/sorter/${s}/enrollments`)}catch(t){console.error(t)}},async getSorterHistory(s){try{this.sorter_history=await n(`/assignment/sorter/${s}/history`)}catch(t){console.error(t)}},async getSkus(s){try{const t=await n(`/sku/assignables/${s}`);Array.isArray(t)&&(this.skus=t)}catch(t){console.error(t)}},async getAssignments(s){try{this.assignments=await n(`/sku/assigned/${s}`),this.assignments=this.assignments.map(t=>({...t,is_expanded:!0}))}catch(t){console.error(t)}},contractAllAssigment(){this.assignments=this.assignments.map(s=>({...s,is_expanded:!1}))},expandAllAssigment(){this.assignments=this.assignments.map(s=>({...s,is_expanded:!0}))}},h={async assignSku(s){try{console.log(s),await l("/assignment",s)}catch(t){console.error(t)}}},y={async toggleSealerStatus(s){try{await m(`/assignment/${s}`,{})}catch(t){console.error(t)}}},k={async unassignSku(s,t){try{await i(`/assignment/${s}/${t}`)}catch(e){console.error(e)}},async unassignAllSku(s){try{await i(`/assignment/${s}`)}catch(t){console.error(t)}},clearFilters(){this.filter_option_selected=null}},A={..._,...h,...y,...k};var o=(s=>(s[s.Automatic=1]="Automatic",s[s.Manual=2]="Manual",s))(o||{});const R={getSkusWithoutRejectBySealerFilter(s){return s.filter_assignment_option_selected===o.Automatic?s.skus.filter(t=>t.sku!==a.SKU_REJECT):s.skus},getSortedSkuListWithoutReject(s){return s.skus.filter(e=>e.sku!==a.SKU_REJECT).toSorted((e,c)=>Number(c.is_master_case)-Number(e.is_master_case))},getSkusListByMaster(s){return s.skus.toSorted((t,e)=>Number(e.is_master_case)-Number(t.is_master_case))},getSealersByType:s=>{let t=[];switch(s.filter_assignment_option_selected){case o.Automatic:t=s.assignments.filter(e=>e.mode==="automatico");break;case o.Manual:t=s.assignments.filter(e=>e.mode==="manual");break}return t}},f=u("mySkuAssignmentStore",{state:S,actions:A,getters:R});export{r as A,o as a,a as s,f as u};
