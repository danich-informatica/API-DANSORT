import{_ as D}from"./Dp2n3JP9.js";import{e as O,g as T,c as u,b as x,F as S,v as b,j as i,w as I,_ as R,o as d,n as m,a as n,x as U,t as h,y as j,z as B,A as G,B as M}from"#entry";import{u as k,s as $,A}from"./CUHb9UJN.js";import{u as z}from"./DPCYF7Io.js";import{_ as F}from"./CcFceyxz.js";const J=()=>{const e=k();return{assignSku:r=>e.assignSku(r)}},L=()=>{const e=k();return{unassignSku:(r,f)=>e.unassignSku(r,f),unassignAllSku:r=>e.unassignAllSku(r)}};var c=(e=>(e.MODE_AUTOMATIC="automatico",e.MODE_MANUAL="manual",e))(c||{});const K=(e,r)=>e.is_enabled?r.is_master_case?"bg-blue-500":r.sku_name===$.SKU_REJECT?"bg-red-500":e.mode===c.MODE_AUTOMATIC&&e.is_enabled?"bg-lgreen3":e.mode===c.MODE_MANUAL&&e.is_enabled?"bg-yellow-600/90":"":"bg-gray-300",V={class:"flex justify-between items-start mx-1"},H={class:"text-2 font-bold text-dgreen1"},P={class:"flex gap-1"},q=["onClick"],Q=["onDrop"],W={key:0,class:"flex flex-col gap-1 overflow-y-auto pr-1 my-1"},X={class:"relative w-full flex justify-start items-center h-8"},Y={class:"px-1 text-xs font-bold"},Z=["onClick"],ss={key:1,class:"flex flex-col items-center justify-center h-full"},es={class:"mt-auto pt-2"},ts=["onClick"],ds=O({__name:"Assignments",props:{sorter_id:{}},setup(e){const r=e,{getAssignments:f}=z(),{assignSku:y}=J(),{unassignSku:N,unassignAllSku:w}=L(),g=k(),v=(o,t)=>{const _=JSON.parse(o.dataTransfer?.getData("assignmentSku")??"");if(!_||!t.is_enabled)return;const l=g.assignments.find(a=>a.sealer_db_id===t.sealer_db_id),s=l.assignments.find(a=>a.sku_name===_.sku),p=l.assignments.length===1;if(r.sorter_id===1&&l.mode===c.MODE_AUTOMATIC&&p){F(A.ASSIGNMENT_ERROR,!0,g.assignment_modals);return}s||y({sealer_id:l.sealer_db_id,sku_id:_.id})},E=o=>o.sku_name!=="REJECT"?!1:g.getSealersByType.flatMap(l=>l.assignments).filter(l=>l.sku_name==="REJECT").length===1;return T(async()=>{await f(r.sorter_id)}),(o,t)=>{const _=D,l=R;return d(),u(S,null,[(d(!0),u(S,null,b(i(g).getSealersByType,(s,p)=>(d(),u("div",{key:p,class:m(["lg:w-52 xl:w-60 p-1 mx-3 my-2 shadow-md bg-white flex flex-col justify-between",{"h-12":!s.is_expanded,"h-72":s.is_expanded}])},[n("div",V,[n("h1",H," Salida "+h(s.sealer_physical_id),1),n("div",P,[n("button",{onClick:a=>s.is_expanded=!s.is_expanded,class:"p-0.5 border border-black rounded-md"},[(d(),j(B(s.is_expanded?"IconsArrowUp":"IconsArrowDown"),{size:"1.5em",class:"text-black"}))],8,q)])]),t[3]||(t[3]=n("hr",{class:"border w-full mt-1"},null,-1)),s.is_expanded?(d(),u("div",{key:0,onDragover:t[0]||(t[0]=G(()=>{},["prevent"])),onDrop:a=>v(a,s),class:"flex flex-col flex-grow overflow-hidden"},[s.assignments.length>0?(d(),u("div",W,[(d(!0),u(S,null,b(s.assignments,(a,C)=>(d(),u("div",{key:C,class:m(["rounded-lg flex justify-center text-white",i(K)(s,a)])},[n("div",X,[n("h1",Y,h(a.sku_name),1),n("button",{onClick:ns=>i(N)(s.sealer_db_id,a.sku_id),class:m(["absolute right-0 px-2 border-l border-white cursor-pointer",{hidden:E(a)}])},[x(_,{class:"transition-transform duration-300 hover:scale-120",size:"1.2em"})],10,Z)])],2))),128))])):(d(),u("div",ss,[...t[2]||(t[2]=[n("h1",{class:"px-1 text-4 font-bold text-black"},"SIN SKUs ASIGNADOS",-1)])])),n("div",es,[n("button",{onClick:a=>i(w)(s.sealer_db_id),class:m(["p-1 bg-dred2 text-white text-4 w-full rounded-md cursor-pointer",{hidden:s.assignments.length===0}])}," DESASIGNAR TODO ",10,ts)])],40,Q)):U("",!0)],2))),128)),x(l,{toggle_modal:("getModalState"in o?o.getModalState:i(M))(("AssignmetModalNames"in o?o.AssignmetModalNames:i(A)).ASSIGNMENT_ERROR,i(g).assignment_modals).show,"onUpdate:toggle_modal":t[1]||(t[1]=s=>("getModalState"in o?o.getModalState:i(M))(("AssignmetModalNames"in o?o.AssignmetModalNames:i(A)).ASSIGNMENT_ERROR,i(g).assignment_modals).show=s)},{default:I(()=>[...t[4]||(t[4]=[n("div",{class:"flex flex-col items-center justify-center p-4"},[n("h1",{class:"title-4 text-dgreen1"},"ATENCIÓN"),n("p",{class:"mt-5 text-2 text-dgreen2"},"NO PUEDES ASIGNAR MÁS DE UN SKU A UNA SALIDA AUTOMÁTICA.")],-1)])]),_:1},8,["toggle_modal"])],64)}}});export{ds as _};
