import{u as f,a as c,s as u}from"./DFRQoFTv.js";import{u as x}from"./pdb2oOUe.js";import{e as w,k as p,g as h,c as d,a as t,n as g,j as o,F as v,v as E,o as m,t as _}from"#entry";const j=()=>{switch(f().filter_assignment_option_selected){case c.Automatic:return"bg-lgreen3";case c.Manual:return"bg-yellow-600/90";default:return""}},C=a=>{const i=f().getSealersByType.flatMap(l=>l.assignments);return new Set(i.map(l=>l.sku_name)).has(a.sku)&&a.sku!==u.SKU_REJECT?"bg-green-500":a.is_master_case?"bg-blue-500":a.sku===u.SKU_REJECT?"bg-red-500":j()},T={class:"w-full flex justify-center items-center my-2"},A={class:"flex items-center text-xs text-black"},D=["onDragstart"],B={class:"relative w-full flex justify-start items-center h-8"},L={class:"text-xs font-bold px-1 text-center"},K=w({__name:"Skus",props:{sorter_id:{}},setup(a){const S=a,{getSkus:i}=x(),n=f(),l=(r,e)=>{r.dataTransfer&&r.dataTransfer.setData("assignmentSku",JSON.stringify(e))},k=p(()=>(n.filter_calibrator_selected!=null?n.getSkusByCalibrator:n.getSkusWithoutRejectBySealerFilter).toSorted((e,s)=>e.sku===u.SKU_REJECT?-1:s.sku===u.SKU_REJECT?1:s.porcentaje-e.porcentaje)),b=p(()=>{const r=n.getSealersByType.flatMap(s=>s.assignments);return new Set(r.map(s=>s.sku_name))});return h(async()=>{await i(S.sorter_id)}),(r,e)=>(m(),d("div",{onMouseenter:e[0]||(e[0]=s=>o(n).is_stopped_assignment_listener=!0),onMouseleave:e[1]||(e[1]=s=>o(n).is_stopped_assignment_listener=!1),class:"w-full px-2 overflow-y-auto bg-white flex flex-col justify-start items-center mt-2 sticky top-[4.5rem] max-h-[calc(100vh-5rem)] overflow-hidden shadow-md rounded-md"},[e[5]||(e[5]=t("h1",{class:"subtitle text-dgreen1"},"LISTADO DE SKUS",-1)),e[6]||(e[6]=t("hr",{class:"border w-full my-2"},null,-1)),t("div",T,[t("div",A,[t("span",{class:g(["mx-1 h-4 w-4 rounded-full",o(n).filter_assignment_option_selected===1?"bg-dgreen2":"bg-amber-500"])},null,2),e[2]||(e[2]=t("h1",null,"SIN ASIGNAR",-1)),e[3]||(e[3]=t("span",{class:"mx-1 h-4 w-4 bg-green-500 rounded-full"},null,-1)),e[4]||(e[4]=t("h1",null,"ASIGNADO",-1))])]),(m(!0),d(v,null,E(o(k).sort(),s=>(m(),d("div",{class:g(["m-1 w-full h-full rounded-lg flex justify-center text-white transition-transform duration-300 hover:scale-102 cursor-pointer",o(C)(s),o(b).has(s.sku)?"bg-dgreen1":"bg-dgray1"]),draggable:"true",onDragstart:y=>l(y,s)},[t("div",B,[t("h1",L,_(s.sku),1),t("label",{class:g(["absolute right-0 px-1 border-l border-white w-10",{hidden:s.sku===("sku_values"in r?r.sku_values:o(u)).SKU_REJECT}])},_(s.porcentaje)+"%",3)])],42,D))),256))],32))}});export{K as _};
