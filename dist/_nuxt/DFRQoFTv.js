import{Z as m}from"#entry";import{g as o,p as _,a as g,r as u}from"./9e-Yg0Sx.js";var a=(s=>(s.SKU_REJECT="REJECT",s))(a||{}),n=(s=>(s.ENROLLMENT_HISTORY="EnrollmentHistory",s.SORTER_HISTORY="SorterHistory",s.SKU_GRAPHS="SkuGraphs",s.ASSIGNMENT_ERROR="AssignmentError",s))(n||{});const S=[{name:n.ENROLLMENT_HISTORY,show:!1},{name:n.SORTER_HISTORY,show:!1},{name:n.SKU_GRAPHS,show:!1},{name:n.ASSIGNMENT_ERROR,show:!1}],h=()=>({assignments:[],assignment_modals:S,filter_option_selected:null,filter_assignment_option_selected:null,filter_calibrator_selected:null,skus:[],sorter_history:[],enrollment_history:[],is_stopped_assignment_listener:!1}),k={async getEnrollmentHistory(s){try{this.enrollment_history=await o(`/assignment/sorter/${s}/enrollments`)}catch(e){console.error(e)}},async getSorterHistory(s){try{this.sorter_history=await o(`/assignment/sorter/${s}/history`)}catch(e){console.error(e)}},async getSkus(s){try{const e=await o(`/sku/assignables/${s}`);Array.isArray(e)&&(this.skus=e)}catch(e){console.error(e)}},async getAssignments(s){try{this.assignments=await o(`/sku/assigned/${s}`),this.assignments=this.assignments.map(e=>({...e,is_expanded:!0}))}catch(e){console.error(e)}},contractAllAssigment(){this.assignments=this.assignments.map(s=>({...s,is_expanded:!1}))},expandAllAssigment(){this.assignments=this.assignments.map(s=>({...s,is_expanded:!0}))}},y={async assignSku(s){try{console.log(s),await _("/assignment",s)}catch(e){console.error(e)}}},A={async toggleSealerStatus(s){try{await g(`/assignment/${s}`,{})}catch(e){console.error(e)}}},f={async unassignSku(s,e){try{await u(`/assignment/${s}/${e}`)}catch(t){console.error(t)}},async unassignAllSku(s){try{await u(`/assignment/${s}`)}catch(e){console.error(e)}},clearFilters(){this.filter_option_selected=null}},d={...k,...y,...A,...f};var i=(s=>(s[s.Automatic=1]="Automatic",s[s.Manual=2]="Manual",s))(i||{});const R={getSkusWithoutRejectBySealerFilter(s){return s.filter_assignment_option_selected===i.Automatic?s.skus.filter(e=>e.sku!==a.SKU_REJECT):s.skus},getSkusByCalibrator(s){const e=s.filter_assignment_option_selected===i.Automatic?s.skus.filter(r=>r.sku!==a.SKU_REJECT):s.skus;if(s.filter_calibrator_selected==null)return e;const t=s.filter_calibrator_selected,c=Number(t);return e.filter(r=>{const l=r.linea??r.line??r.calibrador;return l==null?!0:Number(l)===c})},getSortedSkuListWithoutReject(s){return s.skus.filter(t=>t.sku!==a.SKU_REJECT).toSorted((t,c)=>Number(c.is_master_case)-Number(t.is_master_case))},getSkusListByMaster(s){return s.skus.toSorted((e,t)=>Number(t.is_master_case)-Number(e.is_master_case))},getSealersByType:s=>{let e=[];switch(s.filter_assignment_option_selected){case i.Automatic:e=s.assignments.filter(t=>t.mode==="automatico");break;case i.Manual:e=s.assignments.filter(t=>t.mode==="manual");break}return e}},T=m("mySkuAssignmentStore",{state:h,actions:d,getters:R});export{n as A,i as a,a as s,T as u};
