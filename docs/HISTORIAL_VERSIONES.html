<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Versiones - Sistema DANSORT</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #1a1a2e;
            background: #ffffff;
            font-size: 11pt;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 50px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 3px solid #2d5a27;
        }

        .logo-area {
            margin-bottom: 20px;
        }

        .logo-text {
            font-size: 42px;
            font-weight: 700;
            color: #2d5a27;
            letter-spacing: 3px;
        }

        .logo-subtitle {
            font-size: 14px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 5px;
        }

        .document-title {
            font-size: 28px;
            font-weight: 600;
            color: #1a1a2e;
            margin-top: 25px;
        }

        .document-version {
            display: inline-block;
            background: #2d5a27;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin-top: 15px;
        }

        /* Sections */
        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d5a27;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #e8f5e9;
        }

        .section-content {
            color: #444;
            text-align: justify;
        }

        /* Executive Summary Box */
        .summary-box {
            background: linear-gradient(135deg, #f8fdf8 0%, #e8f5e9 100%);
            border-left: 4px solid #2d5a27;
            padding: 20px 25px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 30px;
        }

        .summary-box p {
            color: #2d5a27;
            font-weight: 500;
        }

        /* Version Convention */
        .convention-grid {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 10px 20px;
            margin-top: 15px;
        }

        .convention-number {
            font-weight: 600;
            color: #2d5a27;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }

        .convention-desc {
            color: #555;
        }

        /* Version Table */
        .version-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 10pt;
        }

        .version-table th {
            background: #2d5a27;
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }

        .version-table th:first-child {
            border-radius: 8px 0 0 0;
        }

        .version-table th:last-child {
            border-radius: 0 8px 0 0;
        }

        .version-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .version-table tr:nth-child(even) {
            background: #f9f9f9;
        }

        .version-table tr:hover {
            background: #f0f7f0;
        }

        .version-badge {
            display: inline-block;
            background: #e8f5e9;
            color: #2d5a27;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }

        .version-badge.major {
            background: #2d5a27;
            color: white;
        }

        /* Version Details */
        .version-detail {
            background: #fafafa;
            border-radius: 10px;
            padding: 20px 25px;
            margin-bottom: 20px;
            border: 1px solid #e8e8e8;
            page-break-inside: avoid;
        }

        .version-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .version-detail-title {
            font-size: 14px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .version-detail-date {
            font-size: 12px;
            color: #888;
        }

        .version-detail-description {
            color: #555;
            font-size: 11pt;
        }

        /* Flow Diagram */
        .flow-container {
            margin: 20px 0;
        }

        .flow-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .flow-number {
            width: 32px;
            height: 32px;
            background: #2d5a27;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
            margin-right: 15px;
        }

        .flow-content {
            flex: 1;
            padding-top: 5px;
        }

        .flow-title {
            font-weight: 600;
            color: #1a1a2e;
            margin-bottom: 3px;
        }

        .flow-desc {
            color: #666;
            font-size: 10pt;
        }

        /* Glossary Table */
        .glossary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .glossary-table th {
            background: #f5f5f5;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: #2d5a27;
            border-bottom: 2px solid #2d5a27;
        }

        .glossary-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            vertical-align: top;
        }

        .glossary-term {
            font-weight: 600;
            color: #1a1a2e;
        }

        /* Footer */
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #e8f5e9;
            text-align: center;
        }

        .footer-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .footer-item {
            text-align: center;
        }

        .footer-label {
            font-size: 10px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .footer-value {
            font-size: 12px;
            font-weight: 600;
            color: #2d5a27;
        }

        .footer-note {
            font-size: 10px;
            color: #999;
            font-style: italic;
            margin-top: 15px;
        }

        /* Page break hints for PDF */
        .page-break {
            page-break-before: always;
        }

        @media print {
            body {
                font-size: 10pt;
            }

            .container {
                padding: 20px 30px;
            }

            .version-detail {
                page-break-inside: avoid;
            }

            .section {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-area">
                <div class="logo-text">DANSORT</div>
                <div class="logo-subtitle">Sistema de Clasificación Automatizada</div>
            </div>
            <h1 class="document-title">Historial de Versiones</h1>
            <span class="document-version">Versión Actual: 1.6.0</span>
        </div>

        <!-- Executive Summary -->
        <div class="section">
            <h2 class="section-title">Resumen Ejecutivo</h2>
            <div class="summary-box">
                <p>DANSORT es el sistema de clasificación automatizada de cajas desarrollado para optimizar el proceso de paletizado en las instalaciones de Greenex. Este documento presenta el historial completo de versiones, detallando las mejoras implementadas y el progreso del desarrollo.</p>
            </div>
        </div>

        <!-- Important Notice -->
        <div class="section">
            <h2 class="section-title">Nota Importante</h2>
            <div style="background: #fff8e1; border-left: 4px solid #f9a825; padding: 20px 25px; border-radius: 0 8px 8px 0; margin-bottom: 20px;">
                <p style="color: #5d4037; font-weight: 500; margin-bottom: 10px;"><strong>Consideraciones sobre las correcciones implementadas:</strong></p>
                <p style="color: #5d4037;">Las correcciones incluidas en cada versión del sistema están diseñadas para resolver causas específicas identificadas durante el análisis de incidencias. Sin embargo, es importante considerar que pueden existir escenarios o condiciones adicionales no contempladas inicialmente que podrían generar comportamientos similares. Por esta razón, se recomienda mantener un monitoreo continuo del sistema y reportar cualquier situación anómala para su evaluación, lo que permitirá identificar y abordar posibles causas no detectadas previamente.</p>
            </div>
        </div>

        <!-- Version Convention -->
        <div class="section">
            <h2 class="section-title">Convención de Versionado</h2>
            <p class="section-content">El sistema utiliza un esquema de versionado semántico compuesto por tres números (X.Y.Z):</p>
            <div class="convention-grid">
                <span class="convention-number">X.0.0</span>
                <span class="convention-desc">Cambios estructurales mayores o rediseños significativos del sistema</span>

                <span class="convention-number">0.Y.0</span>
                <span class="convention-desc">Nuevas funcionalidades o mejoras sustanciales</span>

                <span class="convention-number">0.0.Z</span>
                <span class="convention-desc">Correcciones menores y ajustes de estabilidad</span>
            </div>
        </div>

        <!-- Version Registry Table -->
        <div class="section">
            <h2 class="section-title">Registro de Versiones</h2>
            <table class="version-table">
                <thead>
                    <tr>
                        <th style="width: 100px;">Versión</th>
                        <th style="width: 150px;">Fecha</th>
                        <th>Descripción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="version-badge major">1.6.0</span></td>
                        <td>12 Dic 2025</td>
                        <td>Herramienta CLI de sincronización SKU independiente</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">1.5.1</span></td>
                        <td>11 Dic 2025</td>
                        <td>Corrección de restricción UNIQUE en salida_sku</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.5.0</span></td>
                        <td>11 Dic 2025</td>
                        <td>Validación mejorada de SKU y documentación completa</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.4.0</span></td>
                        <td>10 Dic 2025</td>
                        <td>Incorporación del campo línea de producción</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.3.0</span></td>
                        <td>9 Dic 2025</td>
                        <td>Optimización del protocolo de comunicación con PLC</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.2.0</span></td>
                        <td>27 Nov 2025</td>
                        <td>Sistema de reintentos y salidas alternativas</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.1.0</span></td>
                        <td>25 Nov 2025</td>
                        <td>Mejoras en la interfaz de monitoreo</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge major">1.0.0</span></td>
                        <td>21 Nov 2025</td>
                        <td>Versión estable para producción</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.15.0</span></td>
                        <td>17 Nov 2025</td>
                        <td>Estabilización de conexiones a base de datos</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.14.0</span></td>
                        <td>10 Nov 2025</td>
                        <td>Implementación de caché de cajas y generación de SKU</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.13.0</span></td>
                        <td>3 Nov 2025</td>
                        <td>Integración de información de flejado</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.12.0</span></td>
                        <td>29 Oct 2025</td>
                        <td>Refactorización de arquitectura del sistema</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.11.0</span></td>
                        <td>13 Oct 2025</td>
                        <td>Optimización de actualización en tiempo real</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.10.0</span></td>
                        <td>10 Oct 2025</td>
                        <td>Mejoras en módulo de reasignación</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.9.0</span></td>
                        <td>9 Oct 2025</td>
                        <td>Implementación de WebSocket para comunicación</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.8.0</span></td>
                        <td>8 Oct 2025</td>
                        <td>Nuevo módulo de visualización de altillo</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.7.0</span></td>
                        <td>7 Oct 2025</td>
                        <td>Rediseño de interfaz de usuario</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.6.0</span></td>
                        <td>1 Oct 2025</td>
                        <td>Sistema de motivos de rechazo</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.5.0</span></td>
                        <td>30 Sep 2025</td>
                        <td>Gráficos estadísticos de rechazos</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.4.0</span></td>
                        <td>24 Jun 2025</td>
                        <td>Sistema de asignación y generación de etiquetas</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.3.0</span></td>
                        <td>11 Jun 2025</td>
                        <td>Historial de cambios y notificaciones modales</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.2.0</span></td>
                        <td>20 May 2025</td>
                        <td>Primera iteración de diseño visual</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.1.0</span></td>
                        <td>14 Abr 2025</td>
                        <td>Estructura base del proyecto</td>
                    </tr>
                    <tr>
                        <td><span class="version-badge">0.0.1</span></td>
                        <td>18 Mar 2025</td>
                        <td>Inicio del desarrollo</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Page Break for PDF -->
        <div class="page-break"></div>

        <!-- Version Details -->
        <div class="section">
            <h2 class="section-title">Detalle de Versiones Principales</h2>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.6.0 - Herramienta CLI de sincronización</span>
                    <span class="version-detail-date">12 de diciembre de 2025</span>
                </div>
                <p class="version-detail-description">Se implementó una herramienta de línea de comandos independiente para sincronización entre SQL Server y PostgreSQL. Incluye nuevas herramientas de diagnóstico, mejoras significativas en el sistema de logging para mejor trazabilidad, sistema de verificación de estado y documentación técnica completa. Esto mejora considerablemente la capacidad de diagnóstico y mantenimiento del sistema de sincronización.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.5.1 - Corrección de restricción UNIQUE</span>
                    <span class="version-detail-date">11 de diciembre de 2025</span>
                </div>
                <p class="version-detail-description">Se corrigió la restricción UNIQUE en la tabla salida_sku para incluir el campo línea. Esta corrección previene conflictos en asignaciones de SKU con misma variedad, calibre y embalaje pero diferentes líneas de producción, resolviendo errores críticos de integridad de datos en las asignaciones.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.5.0 - Validación mejorada de SKU y documentación</span>
                    <span class="version-detail-date">11 de diciembre de 2025</span>
                </div>
                <p class="version-detail-description">Se implementó un mecanismo de validación más robusto durante el proceso de sincronización de SKU, incorporando los parámetros dark y línea en la verificación. El sistema ahora verifica la integridad de los datos antes de propagarlos a los sorters, reduciendo errores de asignación. Adicionalmente, se creó documentación completa del historial de versiones en múltiples formatos para diferentes audiencias.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.4.0 - Campo línea de producción</span>
                    <span class="version-detail-date">10 de diciembre de 2025</span>
                </div>
                <p class="version-detail-description">Se agregó el campo "línea" como parte de la clave primaria de SKU. Esta modificación permite diferenciar productos idénticos provenientes de diferentes líneas de producción, mejorando la trazabilidad del proceso.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.3.0 - Comunicación con PLC</span>
                    <span class="version-detail-date">9 de diciembre de 2025</span>
                </div>
                <p class="version-detail-description">Se optimizó la comunicación entre el sistema y los controladores lógicos programables (PLC). Las mejoras incluyen reducción de latencia y mayor estabilidad en la transmisión de señales de clasificación.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.2.0 - Sistema de reintentos</span>
                    <span class="version-detail-date">27 de noviembre de 2025</span>
                </div>
                <p class="version-detail-description">Se implementó un mecanismo de tolerancia a fallos que permite reintentar asignaciones fallidas. Adicionalmente, el sistema puede redirigir cajas a salidas alternativas cuando la salida principal presenta problemas.</p>
            </div>

            <div class="version-detail">
                <div class="version-detail-header">
                    <span class="version-detail-title">Versión 1.0.0 - Versión de producción</span>
                    <span class="version-detail-date">21 de noviembre de 2025</span>
                </div>
                <p class="version-detail-description">Primera versión certificada para uso en ambiente productivo. El sistema alcanza madurez operativa con clasificación automática de cajas, gestión de rechazos, asignación dinámica de SKU y monitoreo en tiempo real.</p>
            </div>
        </div>

        <!-- Functional Description -->
        <div class="section">
            <h2 class="section-title">Descripción Funcional del Sistema</h2>
            <p class="section-content" style="margin-bottom: 20px;">DANSORT gestiona el proceso de clasificación automatizada mediante el siguiente flujo operativo:</p>

            <div class="flow-container">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <div class="flow-title">Lectura</div>
                        <div class="flow-desc">Las cámaras Cognex capturan el código DataMatrix de cada caja.</div>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <div class="flow-title">Identificación</div>
                        <div class="flow-desc">El sistema consulta la base de datos para obtener los atributos del producto.</div>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <div class="flow-title">Clasificación</div>
                        <div class="flow-desc">Se determina la salida de destino según las reglas de asignación configuradas.</div>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">
                        <div class="flow-title">Ejecución</div>
                        <div class="flow-desc">Se envía la señal al PLC para activar el mecanismo de desvío correspondiente.</div>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">5</div>
                    <div class="flow-content">
                        <div class="flow-title">Registro</div>
                        <div class="flow-desc">Se almacena la trazabilidad completa de cada operación.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Glossary -->
        <div class="section">
            <h2 class="section-title">Glosario de Términos</h2>
            <table class="glossary-table">
                <thead>
                    <tr>
                        <th style="width: 130px;">Término</th>
                        <th>Definición</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="glossary-term">DataMatrix</span></td>
                        <td>Código bidimensional impreso en las etiquetas que contiene información del producto</td>
                    </tr>
                    <tr>
                        <td><span class="glossary-term">PLC</span></td>
                        <td>Controlador Lógico Programable; dispositivo que ejecuta las acciones mecánicas de clasificación</td>
                    </tr>
                    <tr>
                        <td><span class="glossary-term">SKU</span></td>
                        <td>Stock Keeping Unit; identificador único compuesto por calibre, variedad, embalaje y flejado</td>
                    </tr>
                    <tr>
                        <td><span class="glossary-term">Sorter</span></td>
                        <td>Módulo de clasificación que gestiona un conjunto de salidas de paletizado</td>
                    </tr>
                    <tr>
                        <td><span class="glossary-term">WebSocket</span></td>
                        <td>Protocolo de comunicación que permite actualizaciones en tiempo real</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-info">
                <div class="footer-item">
                    <div class="footer-label">Sistema</div>
                    <div class="footer-value">DANSORT</div>
                </div>
                <div class="footer-item">
                    <div class="footer-label">Versión Actual</div>
                    <div class="footer-value">1.6.0</div>
                </div>
                <div class="footer-item">
                    <div class="footer-label">Última Actualización</div>
                    <div class="footer-value">12 Diciembre 2025</div>
                </div>
            </div>
            <p class="footer-note">Documento generado para uso interno de Greenex. Desarrollado por Equipo DANICH.</p>
        </div>
    </div>
</body>
</html>
